<!DOCTYPE html> 
<html> 
<head> 
	<title>My Page</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
	<style type="text/css">
		.logo{
			border: 8px solid black;
			background-color: #ff00ff;
			text-align: center;
			padding:50px;
			color:#000000;
		}
	</style>
</head> 
<body> 

<!-- Start of first page: #home -->
<div data-role="page" id="home" data-theme="a">

	<div data-role="header">
		<h3>Home</h3>
	</div><!-- /header -->

	<div data-role="content">	
		<h1 class="logo">KARAOKE PI</h1>
		<p><a href="#searchByPage" data-role="button" data-transition="flow" data-icon="search" data-iconpos="right">Search</a></p>
		<p>
		    <ul data-role="listview" data-inset="true">
 			<li><a href="#myQueuePage" data-transition="flow">My Queue<span class="ui-li-count">3</span></a></li>
			<li><a href="#mainQueuePage" data-transition="flow">Main Queue<span class="ui-li-count">7</span></a></li>
			<li><a href="#favoritesPage" data-transition="flow">Favorites<span class="ui-li-count">1</span></a></li>
		    </ul>
		</p>
		<p><a href="#loginDialog" data-role="button" data-icon="check" data-rel="dialog" data-iconpos="right">Login</a></p>
		<!--<p><a href="#searchByPage" data-role="button" data-transition="flow" data-icon="delete" data-iconpos="right">Logout</a></p>-->
		<p><a href="#searchByPage" data-role="button" data-transition="flow" data-icon="info" data-iconpos="right">About</a></p>
	</div><!-- /content -->
	
	<div data-role="footer">
		<h4>Karaoke Pi - Copyright 2013</h4>
	</div><!-- /footer -->
</div><!-- /page home -->

<!-- Start of second page: #trackDialog -->
<div data-role="page" id="trackDialog" data-theme="a">

	<div data-role="header">
		<h1>Queue this Song?</h1>
	</div><!-- /header -->

	<div data-role="content" data-theme="a">	
		<h3>Wishing Well - Terence Trent D'Arby</h3>
        <p><a href="#" data-role="button" data-theme="b" data-icon="plus" data-iconpos="right">Add to My Queue</a></p>
		<p><a href="#" data-role="button" data-theme="b" data-icon="star" data-iconpos="right">Add to Favorites</a></p>
        <p><a href="#searchPage" data-rel="back" data-role="button" data-theme="a">Cancel</a></p>
		
	</div><!-- /content -->
</div><!-- /page trackDialog -->

<!-- Start of third page: #myQueuePage -->
<div data-role="page" id="myQueuePage" data-theme="a" data-add-back-btn="true">

	<div data-role="header">
		<h1>My Queue</h1>
		<a href="#home" class="ui-btn-right" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
	</div><!-- /header -->

	<div data-role="content">	
		<p>Your songs will automatically be submitted to the Main Queue when the Main Queue requests your next song!</p>
		<p>
			<ol data-role="listview" data-inset="true" data-filter="true">
				<li>Drive - The Cars</li>
				<li>Valerie - Amy Winehouse</li>
				<li>Come Undone - Duran Duran</li>
			</ol>
		</p>
	</div><!-- /content -->
	
	<div data-role="footer">
		<h4>Karaoke Pi - Copyright 2013</h4>
	</div><!-- /footer -->
</div><!-- /page popup -->


<!-- Start of third page: #loginDialog -->
<div data-role="page" id="loginDialog" data-theme="a">

	<div data-role="header">
		<h1>Login</h1>
	</div><!-- /header -->

	<div data-role="content">	
		<p>Please login to continue...or <a href="#">click here to sign up!</a></p>
		<p>
			<label for="text-basic">Username:</label>
			<input type="text" name="text-basic" id="text-basic" value="">
			<label for="password">Password:</label>
			<input type="password" name="password" id="password" value="" autocomplete="off">
		</p>
		<p><a href="#" class="show-page-loading-msg" data-role="button" data-theme="b" data-textonly="false" data-textvisible="true" data-msgtext="Please wait...">Continue</a></p>
        <p><a href="#searchPage" data-rel="back" data-role="button" data-theme="a">Cancel</a></p>
	</div><!-- /content -->
	
	<div data-role="footer">
		<h4>Karaoke Pi - Copyright 2013</h4>
	</div><!-- /footer -->
</div><!-- /page popup -->



<!-- Start of third page: #favoritesPage -->
<div data-role="page" id="favoritesPage" data-theme="a" data-add-back-btn="true">

	<div data-role="header">
		<h1>Favorites</h1>
		<a href="#home" class="ui-btn-right" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
	</div><!-- /header -->

	<div data-role="content">	
		<p>
		    <ul data-role="listview" data-inset="true" data-filter="true">
		       <li>
		       		<a href="#">
		       			<h2>Hungry Like the Wolf</h2>
		       			<!--number perhaps represents how many times the song has been sung-->
		       			<p class="ui-li-aside">10</p>
		       			<p>Duran Duran</p>
		       		</a>
			   </li>
			   <li>
		       		<a href="#">
		       			<h2>Welcome to the Jungle</h2>
		       			<p class="ui-li-aside">2</p>
		       			<p>Gun's and Roses</p>
		       		</a>
			   </li>
			   <li>
		       		<a href="#">
		       			<h2>Break on Through</h2>
		       			<p class="ui-li-aside">7</p>
		       			<p>The Doors</p>
		       		</a>
			   </li>
			   <li>
		       		<a href="#">
		       			<h2>Under the Milky Way Tonight</h2>
		       			<p class="ui-li-aside">2</p>
		       			<p>The Church</p>
		       		</a>
			   </li>
			   <li>
		       		<a href="#">
		       			<h2>Smooth Operator</h2>
		       			<p class="ui-li-aside">1</p>
		       			<p>Sade</p>
		       		</a>
			   </li>
			   <li>
		       		<a href="#">
		       			<h2>In Your Eyes</h2>
		       			<p class="ui-li-aside">0</p>
		       			<p>Peter Gabriel</p>
		       		</a>
			   </li>
			   <li>
		       		Load More...
			   </li>
		    </ul>
		</p>
	</div><!-- /content -->
	
	<div data-role="footer">
		<h4>Karaoke Pi - Copyright 2013</h4>
	</div><!-- /footer -->
</div><!-- /page popup -->

<!-- Start of third page: #mainQueuePage -->
<div data-role="page" id="mainQueuePage" data-theme="a" data-add-back-btn="true">

	<div data-role="header">
		<h1>Main Queue</h1>
		<a href="#home" class="ui-btn-right" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
	</div><!-- /header -->

	<div data-role="content">	
		<p>Who's up next! Get ready!</p>
		<p>
		    <ul data-role="listview" data-inset="true">
		       <li>
		       		<a href="#">
		       			<h2>Sophia P.</h2>
		       			<!--number perhaps represents how many times the song has been sung-->
		       			<!-- <p class="ui-li-aside">10</p> -->
		       			<p><strong>Song:</strong> Step off the Train</p><p><strong>Original Artist:</strong> Ready for the World</p>
		       		</a>
			   </li>
			   <li>
		       		<a href="#">
		       			<h2>Nicole C.</h2>
		       			<!--number perhaps represents how many times the song has been sung-->
		       			<!--<p class="ui-li-aside">10</p>-->
		       			<p><strong>Song:</strong>Valerie</p><p><strong>Original Artist:</strong>Amy Winehouse</p>
		       		</a>
			   </li>
			   <li>
		       		<a href="#">
		       			<h2>Nicole C.</h2>
		       			<!--number perhaps represents how many times the song has been sung-->
		       			<!--<p class="ui-li-aside">10</p>-->
		       			<p><strong>Song:</strong>Valerie</p><p><strong>Original Artist:</strong>Amy Winehouse</p>
		       		</a>
			   </li>
			   <li>
		       		Load More...
			   </li>
		    </ul>
		</p>
	</div><!-- /content -->
	
	<div data-role="footer">
		<h4>Karaoke Pi - Copyright 2013</h4>
	</div><!-- /footer -->
</div><!-- /page popup -->


<!-- Start of third page: #popup -->
<div data-role="page" id="popup">

	<div data-role="header" data-theme="e">
		<h1>Dialog</h1>
	</div><!-- /header -->

	<div data-role="content" data-theme="d">	
		<h2>Popup</h2>
		<p>I have an id of "popup" on my page container and only look like a dialog because the link to me had a <code>data-rel="dialog"</code> attribute which gives me this inset look and a <code>data-transition="pop"</code> attribute to change the transition to pop. Without this, I'd be styled as a normal page.</p>		
		<p><a href="#home" data-rel="back" data-role="button" data-inline="true" data-icon="back">Back to page "home"</a></p>	
	</div><!-- /content -->
	
	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page popup -->

<!-- Start of fourth page: #searchByPage -->
<div data-role="page" id="searchByPage" data-theme="a" data-add-back-btn="true">

    <div data-role="header">
        <h1>Search By</h1>
		<a href="#home" class="ui-btn-right" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
    </div>
    <div data-role="content">
		<p>Search by artist or track.</p>
        <p><a href="#searchPage" data-role="button" data-transition="flow" data-theme="b">Track</a></p>	
		<p><a href="#searchPage" data-role="button" data-transition="flow" data-theme="b">Artist</a></p>	
    </div>
    <!--<div data-role="footer">
        <h4>Page Footer</h4>
    </div>-->
</div>

<!-- Start of fourth page: #searchPage -->
<div data-role="page" id="searchPage" data-theme="a" data-add-back-btn="true">

    <div data-role="header">
        <h1>Search</h1>
        <a href="#home" class="ui-btn-right" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
    </div>
    <div data-role="content">
		<p>Search by artist name, trackname or year.</p>
        <p><label for="searchField">Search Query:</label><input type="search" id="searchField" placeholder="Search" />
		<ul id="suggestions" data-role="listview" data-inset="true"></ul>
		</p>
    </div>
    <!--<div data-role="footer">
        <h4>Page Footer</h4>
    </div>-->
</div>

<script>
//main application logic goes here beyatch.
(function($){
	window.selectTrack = function(trackIndex){
		sessionStorage.selectedTrack=track;
	};
	window.addToMyQueue = function(track_id){
		//calls server-side rest
	};
	window.addToFavorites = function(track_id){
		//calls server-side rest
	};
	window.cancelSelectedTrack = function(track_id){
		//do we need this function?
	};
})(jQuery);

$("#searchPage").on("pageshow", function(e) {

    console.log("Ready to bring the awesome.");

    var sugList = $("#suggestions");

    $("#searchField").on("input", function(e) {
        var text = $(this).val();
        if(text.length < 1) {
            sugList.html("");
            sugList.listview("refresh");
        } else {
            $.get("/search/"+text, function(res, code) {
                if(res && res.results && res.results.length > 0){
                    var str = "";
                    for(var i=0, len=res.results.length; i<len; i++){
						str += '<li data-role="list-divider">'+res.results[i].artist+'<li>';
						for(var x=0, lenX=res.results[i].tracks.length; x<lenX; x++){
							var currentTrack = res.results[i].tracks[x];
                    		str += '<li><a href="#trackDialog" onclick="selectTrack('+ i + ':' + x +');" data-rel="dialog" data-transition="pop">' + currentTrack.t+'</a></li>';
						}
                    }
                    sugList.html(str);
                    sugList.listview("refresh");
                }else{
	    	    	sugList.html("<li><strong>[No Results]</strong></li>");
                	sugList.listview("refresh");
		}
            },"json");
        }
    });
});
//example of loading icon
$(document).on( "click", ".show-page-loading-msg", function(){
	//alert('hi');
    var $this = $(this),
        theme = $this.jqmData("theme") || $.mobile.loader.prototype.options.theme,
        msgText = $this.jqmData("msgtext") || $.mobile.loader.prototype.options.text,
        textVisible = $this.jqmData("textvisible") || $.mobile.loader.prototype.options.textVisible,
        textonly = !!$this.jqmData("textonly");
        html = $this.jqmData("html") || "";
    $.mobile.loading( 'show', {
            text: msgText,
            textVisible: textVisible,
            theme: theme,
            textonly: textonly,
            html: html
	});
}).on("click", ".hide-page-loading-msg", function(){
    $.mobile.loading( 'hide' );
});
</script>
</body>
</html>
